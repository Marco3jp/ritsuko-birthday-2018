## 記念作品の概要
IPFの一部APIの実装と、クライアントの実装。  
今回のクライアントはブラウザベースとして、 https://ritsuko.marco.plus あたりにポータルサイトを作って、そこからプレイしていただけるようにするといいかなという感じ。

## メインテーマ
"アイドル"

## サブテーマ
- プロデューサーとアイドルの関係
- 人と人の関係
- 人を惹きつける、魅了するということ

## シナリオ

## 付属する制作物
- jsonを返すバックエンドアプリケーション
- フロントエンドのギャルゲ式パーサー

### バックエンド
イベントIDを元にして、以下の要素を含んだjsonを生成して返す。
- 発生源
    - キャラクターの名前
    - "event"
- 主要素
    - 発言内容
    - 発生イベント名
        - 画像(立ち絵、背景)切り替え
        - 条件分岐
- 命令の引数オブジェクト
    - 発生源・主要素における配列番号をキーにして引っ張れるようにする
    - 名前は args で、 {"20":["arg1","arg2","arg3"]} という具合で飛ばす

フェッチ先のエンドポイント(のクエリ)はバックエンドで生成したものをjson内に格納し、フロントはただ状況に応じてそこから次のjsonを取ってくるだけで済むようにする。  
主に拡張性を考えてこの策を取ろうと思う。

init_configを吐くエンドポイントも用意して、以下の情報をフロントに伝える。
- 文字の表示速度
- 立ち絵の挙動のデフォルト設定
- 最初のクエリ
    - 今回はすべてはじめからだけど、ログインして開始状況を引き継げるシステムを組むときに重要になる
- 主人公名
    - 特定の名前のとき、フロントエンドで名前入力が発生するとかいう仕組みにしたほうがよさそう
- 追加js
- 無効化するデフォルトjs(関数単位orファイル単位)

イベントIDに対して帰ってくるjsonはおそらく一意であると思うので、DB内にblobで直接格納してそのまま返せばいいように思う。
後々生成する必要が出てきた場合、DB設計をしなおして、生成するコードを書く形に挿し換えよう。


### フロントエンド
バックエンドから飛んでくる上記のjsonをパースする感じ。  
発生イベントの対応がおそらくいちばん大きな部分。
